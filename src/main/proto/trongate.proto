syntax = "proto3";

package ashtein;

option java_multiple_files = true;
option java_package = "ashtein.trongate.proto";
option java_outer_classname = "TronGateProto";

service TronGate {
  rpc CreateWallet (EmptyDto) returns (WalletResponseDto) {}
  rpc GetAssets (WalletAddressDto) returns (stream AssetsResponseDto) {}
  rpc SubscribeEvents (SubscribeEventsRequest) returns (stream WalletEventDto) {}
}

message EmptyDto {}

message SubscribeEventsRequest {
  int64 last_block_number = 1;
}

message WalletAddressDto {
  string address = 1;
}

message AssetsResponseDto {
  string type = 1;
  double balance = 2;
}

message WalletResponseDto {
  string address = 1;
}

message WalletEventDto {
  string wallet_address = 1;
  string tx_hash = 2;
  int64 block_number = 3;
  int64 block_timestamp = 4;
  string event_type = 5;
  string direction = 6;
  string from_address = 7;
  string to_address = 8;
  string amount = 9;
  string token_address = 10;
  bool confirmed = 11;
}
